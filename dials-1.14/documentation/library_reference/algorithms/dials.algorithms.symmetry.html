


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>dials.algorithms.symmetry &#8212; DIALS  documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/dials-styles.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="dxtbx" href="../dxtbx/index.html" />
    <link rel="prev" title="dials.algorithms.spot_prediction" href="dials.algorithms.spot_prediction.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="logoheader container">
  <a href="../../../index.html">
  <img class="logoheader" alt="DIALS" src="../../../_static/dials_header.png" />
  </a>
  </div>
  

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            <div class="seealso">
    This documentation page refers to a previous release of DIALS (1.14).<br/>
    <a href="../../../index.html/../../documentation/library_reference/algorithms/dials.algorithms.symmetry.html">Click here to go to the corresponding page for the latest version of DIALS</a><br/>
  </div>
  <div class="section" id="module-dials.algorithms.symmetry">
<span id="dials-algorithms-symmetry"></span><h1>dials.algorithms.symmetry<a class="headerlink" href="#module-dials.algorithms.symmetry" title="Permalink to this headline">¶</a></h1>
<p>Methods for symmetry determination.</p>
<p>This module provides a base class for symmetry determination algorithms.</p>
<dl class="class">
<dt id="dials.algorithms.symmetry.symmetry_base">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.</code><code class="descname">symmetry_base</code><span class="sig-paren">(</span><em>intensities</em>, <em>normalisation='ml_aniso'</em>, <em>lattice_symmetry_max_delta=2.0</em>, <em>d_min=&lt;libtbx.AutoType object&gt;</em>, <em>min_i_mean_over_sigma_mean=4</em>, <em>min_cc_half=0.6</em>, <em>relative_length_tolerance=None</em>, <em>absolute_angle_tolerance=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry.html#symmetry_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.symmetry_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for symmetry analysis.</p>
<dl class="staticmethod">
<dt id="dials.algorithms.symmetry.symmetry_base.kernel_normalisation">
<em class="property">static </em><code class="descname">kernel_normalisation</code><span class="sig-paren">(</span><em>intensities</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry.html#symmetry_base.kernel_normalisation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.symmetry_base.kernel_normalisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Kernel normalisation of the input intensities.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>intensities</strong> (<a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)"><em>cctbx.miller.array</em></a>) – The intensities to be normalised.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The normalised intensities.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)">cctbx.miller.array</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="dials.algorithms.symmetry.symmetry_base.ml_aniso_normalisation">
<em class="property">static </em><code class="descname">ml_aniso_normalisation</code><span class="sig-paren">(</span><em>intensities</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry.html#symmetry_base.ml_aniso_normalisation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.symmetry_base.ml_aniso_normalisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Anisotropic maximum-likelihood normalisation of the input intensities.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>intensities</strong> (<a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)"><em>cctbx.miller.array</em></a>) – The intensities to be normalised.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The normalised intensities.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)">cctbx.miller.array</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="dials.algorithms.symmetry.symmetry_base.ml_iso_normalisation">
<em class="property">static </em><code class="descname">ml_iso_normalisation</code><span class="sig-paren">(</span><em>intensities</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry.html#symmetry_base.ml_iso_normalisation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.symmetry_base.ml_iso_normalisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Isotropic maximum-likelihood normalisation of the input intensities.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>intensities</strong> (<a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)"><em>cctbx.miller.array</em></a>) – The intensities to be normalised.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The normalised intensities.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)">cctbx.miller.array</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="dials.algorithms.symmetry.symmetry_base.quasi_normalisation">
<em class="property">static </em><code class="descname">quasi_normalisation</code><span class="sig-paren">(</span><em>intensities</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry.html#symmetry_base.quasi_normalisation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.symmetry_base.quasi_normalisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Quasi-normalisation of the input intensities.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>intensities</strong> (<a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)"><em>cctbx.miller.array</em></a>) – The intensities to be normalised.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The normalised intensities.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)">cctbx.miller.array</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-dials.algorithms.symmetry.determine_space_group"></span><p>Algorithms for determination of Laue group symmetry.</p>
<dl class="class">
<dt id="dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.determine_space_group.</code><code class="descname">CorrelationCoefficientAccumulator</code><span class="sig-paren">(</span><em>x=None</em>, <em>y=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#CorrelationCoefficientAccumulator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for incremental computation of correlation coefficients.</p>
<dl class="docutils">
<dt>Uses the single-pass formula for Pearson correlation coefficient:</dt>
<dd><a class="reference external" href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient#For_a_sample">https://en.wikipedia.org/wiki/Pearson_correlation_coefficient#For_a_sample</a></dd>
</dl>
<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.accumulate">
<code class="descname">accumulate</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#CorrelationCoefficientAccumulator.accumulate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.accumulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Accumulate the <cite>x</cite> and <cite>y</cite> values provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>x</strong> (<em>list</em>) – The list of <cite>x</cite> values to accumulate.</li>
<li><strong>y</strong> (<em>list</em>) – The list of <cite>y</cite> values to accumulate.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.coefficient">
<code class="descname">coefficient</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#CorrelationCoefficientAccumulator.coefficient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.coefficient" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the correlation coefficient.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The correlation coefficient.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.denominator">
<code class="descname">denominator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#CorrelationCoefficientAccumulator.denominator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.denominator" title="Permalink to this definition">¶</a></dt>
<dd><p>“Calculate the denominator of the correlation coefficient formula.</p>
<div class="math notranslate nohighlight">
\[\sqrt{n \sum{x^2} - \sum{x}^2} \sqrt{n \sum{y^2} - \sum{y}^2}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The value of the denominator.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.n">
<code class="descname">n</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#CorrelationCoefficientAccumulator.n"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.n" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of values contributing to the correlation coefficient.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">n (int)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.numerator">
<code class="descname">numerator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#CorrelationCoefficientAccumulator.numerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.CorrelationCoefficientAccumulator.numerator" title="Permalink to this definition">¶</a></dt>
<dd><p>“Calculate the numerator of the correlation coefficient formula.</p>
<div class="math notranslate nohighlight">
\[n \sum{x y} - \sum{x} \sum{y}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The value of the numerator.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="dials.algorithms.symmetry.determine_space_group.ScoreSubGroup">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.determine_space_group.</code><code class="descname">ScoreSubGroup</code><span class="sig-paren">(</span><em>subgroup</em>, <em>sym_op_scores</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#ScoreSubGroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.ScoreSubGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Score the probability of a given subgroup being the true subgroup.</p>
<ol class="arabic simple">
<li>Calculates the combined correlation coefficients for symmetry operations
present/absent from the subgroup.</li>
<li>Calculates overall Zcc scores for symmetry elements present/absent from
the subgroup.</li>
<li>Calculates the overall likelihood for this subgroup.</li>
</ol>
<p>See appendix A2 of <a class="reference external" href="https://doi.org/10.1107/S090744491003982X">Evans, P. R. (2011). Acta Cryst. D67, 282-292.</a></p>
<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.ScoreSubGroup.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#ScoreSubGroup.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.ScoreSubGroup.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary representation of the subgroup scoring.</p>
<dl class="docutils">
<dt>The dictionary will contain the following keys:</dt>
<dd><ul class="first last simple">
<li>patterson_group: The current subgroup</li>
<li>likelihood: The likelihood of the subgroup being correct</li>
<li>confidence: The confidence of the subgroup being correct</li>
<li>z_cc_for: The combined Z-scores for all symmetry elements present in the
subgroup</li>
<li>z_cc_against: The combined Z-scores for all symmetry elements present in
the lattice group but not in the subgroup</li>
<li>z_cc_net: The net Z-score, i.e. z_cc_for - z_cc_against</li>
<li>cc_for: The overall correlation coefficient for all symmetry elements
present in the subgroup</li>
<li>cc_against: The overall correlation coefficient for all symmetry
elements present in the lattice group but not in the subgroup</li>
<li>max_angular_difference: The maximum angular difference between the
symmetrised unit cell and the P1 unit cell.</li>
<li>cb_op: The change of basis operation from the input unit cell to the
‘best’ unit cell.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="dials.algorithms.symmetry.determine_space_group.ScoreSymmetryElement">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.determine_space_group.</code><code class="descname">ScoreSymmetryElement</code><span class="sig-paren">(</span><em>intensities</em>, <em>sym_op</em>, <em>cc_true</em>, <em>cc_sig_fac</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#ScoreSymmetryElement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.ScoreSymmetryElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Analyse intensities for presence of a given symmetry operation.</p>
<ol class="arabic simple">
<li>Calculate the correlation coefficient, CC, for the given sym op.</li>
<li>Calculate the probability of observing this CC if the sym op is present,
p(CC; S), modelled by a Cauchy distribution centred on cc_true and width
gamma = sigma_cc.</li>
<li>Calculate the probability of observing this CC if the sym op is
NOT present, p(CC; !S).</li>
<li>Calculate the likelihood of symmetry element being present,
p(S; CC) = p(CC; S) / (p(CC; S) + p(CC; !S))</li>
</ol>
<p>See appendix A1 of <a class="reference external" href="https://doi.org/10.1107/S090744491003982X">Evans, P. R. (2011). Acta Cryst. D67, 282-292.</a></p>
<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.ScoreSymmetryElement.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#ScoreSymmetryElement.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.ScoreSymmetryElement.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary representation of the symmetry element scoring.</p>
<dl class="docutils">
<dt>The dictionary will contain the following keys:</dt>
<dd><ul class="first last simple">
<li>likelihood: The likelihood of the symmetry element being present</li>
<li>z_cc: The Z-score for the correlation coefficent</li>
<li>cc: The correlation coefficient for the symmetry element</li>
<li>n_ref: The number of reflections contributing to the correlation
coefficient</li>
<li>operator: The xyz representation of the symmetry element</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="dials.algorithms.symmetry.determine_space_group.determine_space_group">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.determine_space_group.</code><code class="descname">determine_space_group</code><span class="sig-paren">(</span><em>intensities</em>, <em>normalisation='ml_aniso'</em>, <em>lattice_symmetry_max_delta=2.0</em>, <em>d_min=&lt;libtbx.AutoType object&gt;</em>, <em>min_i_mean_over_sigma_mean=4</em>, <em>min_cc_half=0.6</em>, <em>relative_length_tolerance=None</em>, <em>absolute_angle_tolerance=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#determine_space_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.determine_space_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.symmetry.symmetry_base" title="dials.algorithms.symmetry.symmetry_base"><code class="xref py py-class docutils literal notranslate"><span class="pre">dials.algorithms.symmetry.symmetry_base</span></code></a></p>
<p>Determination of Laue group symmetry using algorithms similar to POINTLESS.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="https://doi.org/10.1107/S0907444905036693">Evans, P. (2006). Acta Cryst. D62, 72-82</a> and
<a class="reference external" href="https://doi.org/10.1107/S090744491003982X">Evans, P. R. (2011). Acta Cryst. D67, 282-292</a>.</p>
</div>
<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.determine_space_group.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#determine_space_group.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.determine_space_group.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary representation of the results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.determine_space_group.determine_space_group.as_json">
<code class="descname">as_json</code><span class="sig-paren">(</span><em>filename=None</em>, <em>indent=2</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#determine_space_group.as_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.determine_space_group.as_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a json representation of the results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Optional filename to export the json representation of
the results.</li>
<li><strong>indent</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – The indent level for pretty-printing of the json. If <code class="docutils literal notranslate"><span class="pre">None</span></code>
is the most compact representation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="dials.algorithms.symmetry.determine_space_group.trunccauchy_pdf">
<code class="descclassname">dials.algorithms.symmetry.determine_space_group.</code><code class="descname">trunccauchy_pdf</code><span class="sig-paren">(</span><em>x</em>, <em>a</em>, <em>b</em>, <em>loc=0</em>, <em>scale=1</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/determine_space_group.html#trunccauchy_pdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.determine_space_group.trunccauchy_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a truncated Cauchy probability density function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The point at which to calculate the PDF.</li>
<li><strong>a</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The lower bound of the truncated distribution.</li>
<li><strong>b</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The upper bound of the truncated distribution.</li>
<li><strong>loc</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The location parameter for the Cauchy distribution.</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The scale parameter for the Cauchy distribution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The value of the probability density function.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-dials.algorithms.symmetry.reindex_to_reference"></span><p>Functions to help with reindexing against a reference dataset.</p>
<dl class="function">
<dt id="dials.algorithms.symmetry.reindex_to_reference.determine_reindex_operator_against_reference">
<code class="descclassname">dials.algorithms.symmetry.reindex_to_reference.</code><code class="descname">determine_reindex_operator_against_reference</code><span class="sig-paren">(</span><em>test_miller_set</em>, <em>reference_miller_set</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/reindex_to_reference.html#determine_reindex_operator_against_reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.reindex_to_reference.determine_reindex_operator_against_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Reindex a miller set to match a reference miller set.</p>
<p>This function takes two miller arrays, a reference and a test array. The
space group is checked to see if any reindexing may be required to give
consistent indexing between both datasets. If possible twin operators exist,
the different indexing options are tested against the reference set, using
the correlation between datasets as the test.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>test_miller_set</strong> (<a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)"><em>cctbx.miller.array</em></a>) – The input miller set to be reindexed.</li>
<li><strong>reference_miller_set</strong> (<a class="reference external" href="https://cctbx.github.io/cctbx/cctbx.miller.html#cctbx.miller.array" title="(in CCTBX vNone)"><em>cctbx.miller.array</em></a>) – The reference miller set.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The change of basis operator which should be
applied to the test dataset to give consistent indexing with the reference.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">cctbx.sgtbx.change_of_basis_op</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-dials.algorithms.symmetry.cosym">
<span id="dials-algorithms-symmetry-cosym"></span><h1>dials.algorithms.symmetry.cosym<a class="headerlink" href="#module-dials.algorithms.symmetry.cosym" title="Permalink to this headline">¶</a></h1>
<p>Methods for symmetry determination from partial datasets.</p>
<p>This module implements the methods of <a class="reference external" href="https://doi.org/10.1107/S2059798318002978">Gildea, R. J. &amp; Winter, G. (2018).
Acta Cryst. D74, 405-410</a> for
determination of Patterson group symmetry from sparse multi-crystal data sets in
the presence of an indexing ambiguity.</p>
<dl class="class">
<dt id="dials.algorithms.symmetry.cosym.analyse_datasets">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.cosym.</code><code class="descname">analyse_datasets</code><span class="sig-paren">(</span><em>intensities</em>, <em>params</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym.html#analyse_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.analyse_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dials.algorithms.symmetry.symmetry_base" title="dials.algorithms.symmetry.symmetry_base"><code class="xref py py-class docutils literal notranslate"><span class="pre">dials.algorithms.symmetry.symmetry_base</span></code></a></p>
<p>Peform cosym analysis.</p>
<p>Peform cosym analysis on the input intensities using the methods of
<a class="reference external" href="https://doi.org/10.1107/S2059798318002978">Gildea, R. J. &amp; Winter, G. (2018). Acta Cryst. D74, 405-410</a> for
determination of Patterson group symmetry from sparse multi-crystal data sets in
the presence of an indexing ambiguity.</p>
</dd></dl>

<dl class="function">
<dt id="dials.algorithms.symmetry.cosym.plot_dendrogram">
<code class="descclassname">dials.algorithms.symmetry.cosym.</code><code class="descname">plot_dendrogram</code><span class="sig-paren">(</span><em>linkage_matrix</em>, <em>file_name</em>, <em>labels=None</em>, <em>color_threshold=0.05</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym.html#plot_dendrogram"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.plot_dendrogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot dendrogram from a linkage matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>linkage_matrix</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – The hierarchical clustering of centroids of
the initial clustering as produced by
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.linkage.html#scipy.cluster.hierarchy.linkage" title="(in SciPy v1.3.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.cluster.hierarchy.linkage()</span></code></a>.</li>
<li><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The output file name.</li>
<li><strong>labels</strong> (<em>list</em>) – Optional labels for the leaves of the dendrogram.</li>
<li><strong>color_threshold</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The color threshold passed to the
:func:scipy.cluster.hierarchy.dendrogram` function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dials.algorithms.symmetry.cosym.plot_matrix">
<code class="descclassname">dials.algorithms.symmetry.cosym.</code><code class="descname">plot_matrix</code><span class="sig-paren">(</span><em>correlation_matrix</em>, <em>linkage_matrix</em>, <em>file_name</em>, <em>labels=None</em>, <em>color_threshold=0.05</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym.html#plot_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.plot_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot correlation and linkage matrices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>correlation_matrix</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – The distance matrix used to generate
the <code class="docutils literal notranslate"><span class="pre">linkage_matrix</span></code>.</li>
<li><strong>linkage_matrix</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – The hierarchical clustering of centroids of
the initial clustering as produced by
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.linkage.html#scipy.cluster.hierarchy.linkage" title="(in SciPy v1.3.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.cluster.hierarchy.linkage()</span></code></a>.</li>
<li><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The output file name.</li>
<li><strong>labels</strong> (<em>list</em>) – Optional labels for the leaves of the dendrogram.</li>
<li><strong>color_threshold</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The color threshold passed to the
:func:scipy.cluster.hierarchy.dendrogram` function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-dials.algorithms.symmetry.cosym.target"></span><p>Target function for cosym analysis.</p>
<dl class="class">
<dt id="dials.algorithms.symmetry.cosym.target.Target">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.cosym.target.</code><code class="descname">Target</code><span class="sig-paren">(</span><em>intensities</em>, <em>lattice_ids</em>, <em>weights=None</em>, <em>min_pairs=None</em>, <em>lattice_group=None</em>, <em>dimensions=None</em>, <em>nproc=1</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Target function for cosym analysis.</p>
<dl class="attribute">
<dt id="dials.algorithms.symmetry.cosym.target.Target.dim">
<code class="descname">dim</code><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.dim" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of dimensions used in the analysis.</p>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.compute_functional">
<code class="descname">compute_functional</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.compute_functional"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.compute_functional" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the target function at coordinates <cite>x</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)"><em>scitbx.array_family.flex.double</em></a>) – a flattened list of the N-dimensional vectors, i.e. coordinates in
the first dimension are stored first, followed by the coordinates in
the second dimension, etc.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The value of the target function at coordinates <cite>x</cite>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">f (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)">float</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.compute_functional_and_gradients">
<code class="descname">compute_functional_and_gradients</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.compute_functional_and_gradients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.compute_functional_and_gradients" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the target function and gradients at coordinates <cite>x</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)"><em>scitbx.array_family.flex.double</em></a>) – a flattened list of the N-dimensional vectors, i.e. coordinates in
the first dimension are stored first, followed by the coordinates in
the second dimension, etc.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">f: The value of the target function at coordinates <cite>x</cite>.
grad: The gradients of the target function with respect to the parameters.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Tuple[<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)">float</a>, <a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)">scitbx.array_family.flex.double</a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.compute_gradients_fd">
<code class="descname">compute_gradients_fd</code><span class="sig-paren">(</span><em>x</em>, <em>eps=1e-06</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.compute_gradients_fd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.compute_gradients_fd" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the gradients at coordinates <cite>x</cite> using finite differences.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)"><em>scitbx.array_family.flex.double</em></a>) – a flattened list of the N-dimensional vectors, i.e. coordinates in
the first dimension are stored first, followed by the coordinates in
the second dimension, etc.</li>
<li><strong>eps</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The value of epsilon to use in finite difference calculations.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The gradients of the target function with respect to the parameters.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">grad (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)">scitbx.array_family.flex.double</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.curvatures">
<code class="descname">curvatures</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.curvatures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.curvatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the curvature of the target function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)"><em>scitbx.array_family.flex.double</em></a>) – a flattened list of the N-dimensional vectors, i.e. coordinates in
the first dimension are stored first, followed by the coordinates in
the second dimension, etc.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The curvature of the target function with respect to the parameters.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">curvs (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)">scitbx.array_family.flex.double</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.curvatures_fd">
<code class="descname">curvatures_fd</code><span class="sig-paren">(</span><em>x</em>, <em>eps=1e-06</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.curvatures_fd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.curvatures_fd" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the curvatures at coordinates <cite>x</cite> using finite differences.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)"><em>scitbx.array_family.flex.double</em></a>) – a flattened list of the N-dimensional vectors, i.e. coordinates in
the first dimension are stored first, followed by the coordinates in
the second dimension, etc.</li>
<li><strong>eps</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The value of epsilon to use in finite difference calculations.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The curvature of the target function with respect to the parameters.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">curvs (<a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="(in CCTBX vNone)">scitbx.array_family.flex.double</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.get_sym_ops">
<code class="descname">get_sym_ops</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.get_sym_ops"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.get_sym_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of symmetry operations used in the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The list of symmetry operations.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List[cctbx.sgtbx.rt_mx]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.plot_rij_cumulative_frequency">
<code class="descname">plot_rij_cumulative_frequency</code><span class="sig-paren">(</span><em>plot_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.plot_rij_cumulative_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.plot_rij_cumulative_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the cumulative frequency of the rij values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plot_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The file name to save the plot to.
If this is not defined then the plot is displayed in interactive mode.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.plot_rij_histogram">
<code class="descname">plot_rij_histogram</code><span class="sig-paren">(</span><em>plot_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.plot_rij_histogram"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.plot_rij_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a histogram of the rij values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plot_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The file name to save the plot to.
If this is not defined then the plot is displayed in interactive mode.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.plot_rij_matrix">
<code class="descname">plot_rij_matrix</code><span class="sig-paren">(</span><em>plot_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.plot_rij_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.plot_rij_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the matrix of rij values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plot_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The file name to save the plot to.
If this is not defined then the plot is displayed in interactive mode.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.plot_wij_cumulative_frequency">
<code class="descname">plot_wij_cumulative_frequency</code><span class="sig-paren">(</span><em>plot_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.plot_wij_cumulative_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.plot_wij_cumulative_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the cumulative frequency of the wij values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plot_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The file name to save the plot to.
If this is not defined then the plot is displayed in interactive mode.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.plot_wij_histogram">
<code class="descname">plot_wij_histogram</code><span class="sig-paren">(</span><em>plot_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.plot_wij_histogram"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.plot_wij_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a histogram of the wij values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plot_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The file name to save the plot to.
If this is not defined then the plot is displayed in interactive mode.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.plot_wij_matrix">
<code class="descname">plot_wij_matrix</code><span class="sig-paren">(</span><em>plot_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.plot_wij_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.plot_wij_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the matrix of wij values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plot_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The file name to save the plot to.
If this is not defined then the plot is displayed in interactive mode.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.target.Target.set_dimensions">
<code class="descname">set_dimensions</code><span class="sig-paren">(</span><em>dimensions</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/target.html#Target.set_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.target.Target.set_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of dimensions for analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dimensions</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – The number of dimensions to be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-dials.algorithms.symmetry.cosym.engine"></span><p>LBFGS refinement engine for cosym analysis.</p>
<dl class="class">
<dt id="dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.cosym.engine.</code><code class="descname">lbfgs_with_curvs</code><span class="sig-paren">(</span><em>target</em>, <em>coords</em>, <em>use_curvatures=True</em>, <em>termination_params=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/engine.html#lbfgs_with_curvs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Minimise a target function using the LBFGS minimiser.</p>
<p>Implementation of an LBFGS minimiser using curvature information, according
to the interface defined by <a class="reference external" href="https://cctbx.github.io/scitbx/scitbx.lbfgs.html#module-scitbx.lbfgs" title="(in CCTBX vNone)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scitbx.lbfgs</span></code></a>.</p>
<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.callback_after_step">
<code class="descname">callback_after_step</code><span class="sig-paren">(</span><em>minimizer</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/engine.html#lbfgs_with_curvs.callback_after_step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.callback_after_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Log progress after each successful step of the minimisation.</p>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.compute_functional_and_gradients">
<code class="descname">compute_functional_and_gradients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/engine.html#lbfgs_with_curvs.compute_functional_and_gradients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.compute_functional_and_gradients" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the functional and gradients.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A tuple of the functional and gradients.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.compute_functional_gradients_and_curvatures">
<code class="descname">compute_functional_gradients_and_curvatures</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/engine.html#lbfgs_with_curvs.compute_functional_gradients_and_curvatures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.compute_functional_gradients_and_curvatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the functional, gradients and curvatures.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A tuple of the functional, gradients and curvatures.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.compute_functional_gradients_diag">
<code class="descname">compute_functional_gradients_diag</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/engine.html#lbfgs_with_curvs.compute_functional_gradients_diag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.compute_functional_gradients_diag" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the functional, gradients and diagonal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A tuple of the functional, gradients and diagonal, where the
diagonal is the reciprocal of the curvatures.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.curvatures">
<code class="descname">curvatures</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/engine.html#lbfgs_with_curvs.curvatures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.engine.lbfgs_with_curvs.curvatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the curvatures.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-dials.algorithms.symmetry.cosym.seed_clustering"></span><p>Seed clustering method for cosym analysis.</p>
<dl class="class">
<dt id="dials.algorithms.symmetry.cosym.seed_clustering.seed_clustering">
<em class="property">class </em><code class="descclassname">dials.algorithms.symmetry.cosym.seed_clustering.</code><code class="descname">seed_clustering</code><span class="sig-paren">(</span><em>coordinates</em>, <em>n_datasets</em>, <em>n_sym_ops</em>, <em>min_silhouette_score</em>, <em>n_clusters=&lt;libtbx.AutoType object&gt;</em>, <em>plot_prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/dials/algorithms/symmetry/cosym/seed_clustering.html#seed_clustering"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dials.algorithms.symmetry.cosym.seed_clustering.seed_clustering" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Perform seed clustering of coordinates.</p>
<p>Labels points into clusters such that cluster contains exactly one copy
of each dataset, then performs silhouettete analysis on the resulting
clusters to determine the true number of clusters present, under the
constraint that only equal-sized clusterings are valid, i.e. each
dataset should appear an equal number of times in each cluster.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="https://en.wikipedia.org/wiki/Silhouette_(clustering">https://en.wikipedia.org/wiki/Silhouette_(clustering</a>)
<a class="reference external" href="http://scikit-learn.org/stable/auto_examples/cluster/plot_kmeans_silhouette_analysis.html">http://scikit-learn.org/stable/auto_examples/cluster/plot_kmeans_silhouette_analysis.html</a></p>
</div>
<dl class="attribute">
<dt id="dials.algorithms.symmetry.cosym.seed_clustering.seed_clustering.cluster_labels">
<code class="descname">cluster_labels</code><a class="headerlink" href="#dials.algorithms.symmetry.cosym.seed_clustering.seed_clustering.cluster_labels" title="Permalink to this definition">¶</a></dt>
<dd><p><em>scitbx.array_family.flex.int</em> – A label for each coordinate.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--<h3>Navigation</h3>-->
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">How-to</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workshops/index.html">Workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../links.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">License</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer container">
  <a href="https://www.diamond.ac.uk/"><img class="logofooter" alt="Diamond" src="../../../_static/diamond_logo.png" /></a>
  <a href="https://www.ccp4.ac.uk/"><img class="logofooter" alt="CCP4" src="../../../_static/CCP4-logo-plain.png" /></a>
  <a href="https://www.lbl.gov/"><img class="logofooter" alt="LBL" src="../../../_static/LBL-logo-wide.jpeg" /></a>
  <a href="https://www.stfc.ac.uk/"><img class="logofooter" alt="STFC" src="../../../_static/STFC_logo.png" /></a>
  </div>

  <script type="text/javascript">
     $(document).ready(function() {
         $(".toggle > *").hide();
         $(".toggle .header").show();
         $(".toggle .header").click(function() {
             $(this).parent().children().not(".header").toggle(400);
             $(this).parent().children(".header").toggleClass("open");
         })
     });
  </script>
  
    <div class="footer">
      &copy;2019, Diamond Light Source, Lawrence Berkeley National Laboratory and STFC.
      
    </div>

    

    

  </body>
</html>